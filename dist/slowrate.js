!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Slowrate=t():e.Slowrate=t()}(this,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=6)}([function(e,t){e.exports=require("babel-runtime/helpers/classCallCheck")},function(e,t){e.exports=require("babel-runtime/helpers/createClass")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(r(0)),i=u(r(1));function u(e){return e&&e.__esModule?e:{default:e}}var o=0,s=function(){function e(t){var r=this;(0,n.default)(this,e),this._heap=[],this.isEmpty=function(){return 0===r.size},this.push=function(e){r._heap.push(e),r._siftUp(r._heap.length-1)},this.pop=function(){var e=r.peek(),t=r.size-1;return t>o&&r._swap(o,t),r._heap.pop(),r._siftDown(o),e},this.peek=function(){return r._heap[o]},this.toArray=function(){return r._heap},this._siftUp=function(e){var t=a(e);t>=0&&t<e&&r._isHigher(e,t)&&(r._swap(e,t),r._siftUp(t))},this._siftDown=function(e){var t=p(e),n=f(e);if(t<r.size&&r._isHigher(t,e)||n<r.size&&r._isHigher(n,e)){var i;i=t>=r.size?n:n>=r.size?t:r._isHigher(n,t)?n:t,r._swap(e,i),r._siftDown(i)}},this._isHigher=function(e,t){return r._compare(r._heap[e],r._heap[t])>0},this._swap=function(e,t){var n=r._heap[e];r._heap[e]=r._heap[t],r._heap[t]=n},this._compare=t}return(0,i.default)(e,[{key:"size",get:function(){return this._heap.length}}]),e}();t.default=s;var a=function(e){return Math.floor((e-1)/2)},p=function(e){return 2*e+1},f=function(e){return 2*e+2}},function(e,t){e.exports=require("babel-runtime/core-js/promise")},function(e,t){e.exports=require("babel-runtime/helpers/asyncToGenerator")},function(e,t){e.exports=require("babel-runtime/regenerator")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(5)),i=a(r(4)),u=a(r(3)),o=a(r(0)),s=a(r(2));function a(e){return e&&e.__esModule?e:{default:e}}t.default=function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{interval:500};(0,o.default)(this,e),this._intervalId=void 0,this.submit=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Date.now(),i=new u.default(function(i,u){t._priorityQueue.push({run:e,resolve:i,reject:u,priority:r,submittedTimestamp:n})});return void 0===t._intervalId&&(t._intervalId=setInterval(t._fire,t._interval)),i},this.queueSize=function(){return t._priorityQueue.size},this._fire=(0,i.default)(n.default.mark(function e(){var r,i;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t._priorityQueue.pop(),0===t._priorityQueue.size&&clearInterval(t._intervalId),!r){e.next=13;break}return e.prev=3,e.next=6,r.run();case 6:i=e.sent,r.resolve(i),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),r.reject(e.t0);case 13:case"end":return e.stop()}},e,t,[[3,10]])})),this._compareInternalRequests=function(e,t){var r=e.priority-t.priority;return 0===r&&(r=e.submittedTimestamp-t.submittedTimestamp),r},this._interval=r.interval,this._priorityQueue=new s.default(this._compareInternalRequests)}}])});