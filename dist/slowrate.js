!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Slowrate=t():e.Slowrate=t()}(this,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=0,o=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._heap=[],this.isEmpty=function(){return 0===n.size},this.push=function(e){n._heap.push(e),n._siftUp(n._heap.length-1)},this.pop=function(){var e=n.peek(),t=n.size-1;return t>i&&n._swap(i,t),n._heap.pop(),n._siftDown(i),e},this.peek=function(){return n._heap[i]},this.toArray=function(){return n._heap},this._siftUp=function(e){var t=u(e);t>=0&&t<e&&n._isHigher(e,t)&&(n._swap(e,t),n._siftUp(t))},this._siftDown=function(e){var t=a(e),r=s(e);if(t<n.size&&n._isHigher(t,e)||r<n.size&&n._isHigher(r,e)){var i;i=t>=n.size?r:r>=n.size?t:n._isHigher(r,t)?r:t,n._swap(e,i),n._siftDown(i)}},this._isHigher=function(e,t){return n._compare(n._heap[e],n._heap[t])>0},this._swap=function(e,t){var r=n._heap[e];n._heap[e]=n._heap[t],n._heap[t]=r},this._compare=t}return r(e,[{key:"size",get:function(){return this._heap.length}}]),e}();t.default=o;var u=function(e){return Math.floor((e-1)/2)},a=function(e){return 2*e+1},s=function(e){return 2*e+2}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n(0))&&r.__esModule?r:{default:r};t.default=function e(){var t,n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{interval:500};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._intervalId=void 0,this.submit=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=Date.now(),i=new Promise(function(i,o){n._priorityQueue.push({run:e,resolve:i,reject:o,priority:t,submittedTimestamp:r})});return void 0===n._intervalId&&(n._intervalId=setInterval(n._fire,n._interval)),i},this.queueSize=function(){return n._priorityQueue.size},this._fire=(t=regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n._priorityQueue.pop(),0===n._priorityQueue.size&&clearInterval(n._intervalId),!t){e.next=13;break}return e.prev=3,e.next=6,t.run();case 6:r=e.sent,t.resolve(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),t.reject(e.t0);case 13:case"end":return e.stop()}},e,n,[[3,10]])}),function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function r(i,o){try{var u=e[i](o),a=u.value}catch(e){return void n(e)}if(!u.done)return Promise.resolve(a).then(function(e){r("next",e)},function(e){r("throw",e)});t(a)}("next")})}),this._compareInternalRequests=function(e,t){var n=e.priority-t.priority;return 0===n&&(n=e.submittedTimestamp-t.submittedTimestamp),n},this._interval=r.interval,this._priorityQueue=new i.default(this._compareInternalRequests)}}])});